description "Simple echo service"

#installing node to a container, this part is only redone if the text
#inside the script blocks changes between version, which saves build time
build script
  apt-get -y install --force-yes git curl
  apt-get -y install --force-yes software-properties-common python g++ make
  add-apt-repository -y ppa:chris-lea/node.js
  apt-get -y update
  apt-get -y install --force-yes nodejs
end script

#use npm to get current, then start
#this part is run each time a service starts
run script
  npm install
  npm start
end script

#this is a health check, simply coming back with a 200 is a pass
#starphleet won't mount your service and roll an upgrade unless this passes
#it is run pointed at the container, which will be resolved to the correct
#IP address
healthcheck http://container:3000/

